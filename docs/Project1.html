<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Pranav Nair, Kyra Kapsaskis">

<title>Project 1 - Pranav and Kyra - ST558</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="fullcontent">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Project 1 - Pranav and Kyra - ST558</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Pranav Nair, Kyra Kapsaskis </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="data-processing" class="level2">
<h2 class="anchored" data-anchor-id="data-processing">Data Processing</h2>
<section id="first-steps" class="level3">
<h3 class="anchored" data-anchor-id="first-steps">First steps</h3>
<p>For the first part of our project, we are looking at some survey data about school enrollment.</p>
<p>First, we need to load our necessary packages</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ forcats   1.0.0     ✔ readr     2.1.5
✔ ggplot2   3.5.1     ✔ stringr   1.5.1
✔ lubridate 1.9.3     ✔ tibble    3.2.1
✔ purrr     1.0.2     </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For our first data file, we will only be looking at some of the columns. Initially, we want to read the data in and call it, to make sure we’ve done this successfully.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>EDU01a <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://www4.stat.ncsu.edu/~online/datasets/EDU01a.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 3198 Columns: 42
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (22): Area_name, STCOU, EDU010187N1, EDU010187N2, EDU010188N1, EDU010188...
dbl (20): EDU010187F, EDU010187D, EDU010188F, EDU010188D, EDU010189F, EDU010...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>EDU01a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,198 × 42
   Area_name     STCOU EDU010187F EDU010187D EDU010187N1 EDU010187N2 EDU010188F
   &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;            &lt;dbl&gt;
 1 UNITED STATES 00000          0   40024299 0000        0000                 0
 2 ALABAMA       01000          0     733735 0000        0000                 0
 3 Autauga, AL   01001          0       6829 0000        0000                 0
 4 Baldwin, AL   01003          0      16417 0000        0000                 0
 5 Barbour, AL   01005          0       5071 0000        0000                 0
 6 Bibb, AL      01007          0       3557 0000        0000                 0
 7 Blount, AL    01009          0       7319 0000        0000                 0
 8 Bullock, AL   01011          0       2014 0000        0000                 0
 9 Butler, AL    01013          0       4640 0000        0000                 0
10 Calhoun, AL   01015          0      20939 0000        0000                 0
# ℹ 3,188 more rows
# ℹ 35 more variables: EDU010188D &lt;dbl&gt;, EDU010188N1 &lt;chr&gt;, EDU010188N2 &lt;chr&gt;,
#   EDU010189F &lt;dbl&gt;, EDU010189D &lt;dbl&gt;, EDU010189N1 &lt;chr&gt;, EDU010189N2 &lt;chr&gt;,
#   EDU010190F &lt;dbl&gt;, EDU010190D &lt;dbl&gt;, EDU010190N1 &lt;chr&gt;, EDU010190N2 &lt;chr&gt;,
#   EDU010191F &lt;dbl&gt;, EDU010191D &lt;dbl&gt;, EDU010191N1 &lt;chr&gt;, EDU010191N2 &lt;chr&gt;,
#   EDU010192F &lt;dbl&gt;, EDU010192D &lt;dbl&gt;, EDU010192N1 &lt;chr&gt;, EDU010192N2 &lt;chr&gt;,
#   EDU010193F &lt;dbl&gt;, EDU010193D &lt;dbl&gt;, EDU010193N1 &lt;chr&gt;, EDU010193N2 &lt;chr&gt;, …</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="section" class="level1">
<h1>#1</h1>
<p>The data looks good! So now we will select only the columns that we’d like to look at. Using the <code>select()</code> function, we can name our data frame, the columns that we want, and we can even use <code>starts_with</code> and <code>ends_with</code> to help us choose exactly what we want with a little more specificity and ease. We are creating a new object in the process so that we can do further manipulations on just these columns. We’re calling the new object <code>EDU01a_select</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#1 - Select following columns</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>EDU01a_select <span class="ot">&lt;-</span> EDU01a <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">"Area_name"</span>, <span class="fu">starts_with</span>(<span class="st">"STC"</span>), <span class="fu">ends_with</span>(<span class="st">"D"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">area_name =</span> <span class="st">"Area_name"</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>EDU01a_select</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,198 × 12
   area_name     STCOU EDU010187D EDU010188D EDU010189D EDU010190D EDU010191D
   &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
 1 UNITED STATES 00000   40024299   39967624   40317775   40737600   41385442
 2 ALABAMA       01000     733735     728234     730048     728252     725541
 3 Autauga, AL   01001       6829       6900       6920       6847       7008
 4 Baldwin, AL   01003      16417      16465      16799      17054      17479
 5 Barbour, AL   01005       5071       5098       5068       5156       5173
 6 Bibb, AL      01007       3557       3508       3571       3621       3652
 7 Blount, AL    01009       7319       7223       7205       7209       7155
 8 Bullock, AL   01011       2014       1980       1985       1983       1985
 9 Butler, AL    01013       4640       4582       4610       4591       4544
10 Calhoun, AL   01015      20939      20923      20907      20849      20768
# ℹ 3,188 more rows
# ℹ 5 more variables: EDU010192D &lt;dbl&gt;, EDU010193D &lt;dbl&gt;, EDU010194D &lt;dbl&gt;,
#   EDU010195D &lt;dbl&gt;, EDU010196D &lt;dbl&gt;</code></pre>
</div>
</div>
<hr>
</section>
<section id="section-1" class="level1">
<h1>#2</h1>
<p>We know that in this data, the column that ends with a D indicates an enrollment value for that year (with the year being the two digits before the ‘D’). Going down, we see all of the enrollment values from that year, in all of the different cities. In order to make this data easier for us to read and understand, we can convert it to long format and rename the columns. What this will do, is turn the columns with this awkward long name ending with D, to simply read ‘<code>Enrollment</code>’. Then all of the years will be listed going down and the corresponding values will appear alongside them. This also means that there will be more than one row/observation for each city. Instead of looking all the way across the row for each city and scanning for the correct year column, we will now have individual rows/observations for city, a year, and the corresponding enrollment value. This will make things easier to process.</p>
<p>In order to do this conversion, we are going to simply use the <code>pivot_longer()</code> function, and its built-in arguments to achieve our goal. <code>Names_to</code> helps us give a new name to the new column <strong>containing</strong> the <strong>NAMES OF THE COLUMNS</strong> we have specified. This makes sense when you think about it because these used to be names of the columns and now they need a new name, as they have been rotated and will be located where the data is. <code>Values_to</code> helps us set a new name for the data <strong>values</strong> that will remain values but will just be slightly shifted to correspond to the brand new <code>Enrollment</code> column we’ve made.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using the help documentation is such a convenient way to remember what the arguments are asking for</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(pivot_longer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s give it a whirl! And we are also creating a new object at the same time called <code>EDU01a_long</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#2 - Convert to long data</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>EDU01a_long <span class="ot">&lt;-</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(EDU01a_select, <span class="at">cols =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">12</span>,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Enrollment"</span>,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"values"</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(EDU01a_long)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [31,980 × 4] (S3: tbl_df/tbl/data.frame)
 $ area_name : chr [1:31980] "UNITED STATES" "UNITED STATES" "UNITED STATES" "UNITED STATES" ...
 $ STCOU     : chr [1:31980] "00000" "00000" "00000" "00000" ...
 $ Enrollment: chr [1:31980] "EDU010187D" "EDU010188D" "EDU010189D" "EDU010190D" ...
 $ values    : num [1:31980] 40024299 39967624 40317775 40737600 41385442 ...</code></pre>
</div>
</div>
<p>Scrolling through, the data looks how we want it to for now.</p>
<hr>
</section>
<section id="section-2" class="level1">
<h1>#3</h1>
<p>The next step is to make further sense of this long Enrollment string. Two digits of the year are in there so we want to pull that out and make it look better by adding the other digits of the year.</p>
<p>The enrollment variable contains strings that are 10 digits long, so we are pulling out the year data with the <code>substr()</code> function, and the first 7 digits will also be pulled out as a new ‘Measurement’ variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#3 create new variable for the 2 year digits called 'incomplete year' and then convert it to numeric so that we will be able to add 1900 to it, so it will be in date format. </span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>EDU01a_new <span class="ot">&lt;-</span> EDU01a_long <span class="sc">|&gt;</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">IncompleteYear =</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(Enrollment, <span class="dv">7</span>, <span class="dv">9</span>)),</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">Measurement =</span> <span class="fu">substr</span>(Enrollment, <span class="dv">1</span>, <span class="dv">7</span>), </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">Year =</span> IncompleteYear <span class="sc">+</span> <span class="dv">1800</span>) <span class="sc">|&gt;</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(<span class="sc">-</span>IncompleteYear)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>EDU01a_new</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 31,980 × 6
   area_name     STCOU Enrollment   values Measurement  Year
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;
 1 UNITED STATES 00000 EDU010187D 40024299 EDU0101      1987
 2 UNITED STATES 00000 EDU010188D 39967624 EDU0101      1988
 3 UNITED STATES 00000 EDU010189D 40317775 EDU0101      1989
 4 UNITED STATES 00000 EDU010190D 40737600 EDU0101      1990
 5 UNITED STATES 00000 EDU010191D 41385442 EDU0101      1991
 6 UNITED STATES 00000 EDU010192D 42088151 EDU0101      1992
 7 UNITED STATES 00000 EDU010193D 42724710 EDU0101      1993
 8 UNITED STATES 00000 EDU010194D 43369917 EDU0101      1994
 9 UNITED STATES 00000 EDU010195D 43993459 EDU0101      1995
10 UNITED STATES 00000 EDU010196D 44715737 EDU0101      1996
# ℹ 31,970 more rows</code></pre>
</div>
</div>
<hr>
</section>
<section id="section-3" class="level1">
<h1>#4</h1>
<p>The data contains both county and non-county data, so we are going to separate them. We will do that by using “, \w\w” to look for the character string that is in the format of the state acronym. The acronym TELLS us that it is county data (because the states don’t have that). The grep() function finds patterns that match the given pattern.</p>
<p>We are creating an object called ‘countystuff’ and this will be a list of integers that match the row numbers of the county data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#4</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create two data sets, one for non-county and one for county level</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>countystuff <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">", </span><span class="sc">\\</span><span class="st">w</span><span class="sc">\\</span><span class="st">w"</span>, EDU01a_new<span class="sc">$</span>area_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s test it to see if pulling out the acronym worked!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># looking at the output and structure of countystuff</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(countystuff)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> int [1:31450] 21 22 23 24 25 26 27 28 29 30 ...</code></pre>
</div>
</div>
<p>Now, we can use the list we just created to indicate which rows we want in a brand new tibble called EDU01a_county. In this case, we want the ‘countystuff’ rows and all of the columns associated with them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>EDU01a_county <span class="ot">&lt;-</span> EDU01a_new[countystuff, ]</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>EDU01a_county</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 31,450 × 6
   area_name   STCOU Enrollment values Measurement  Year
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;
 1 Autauga, AL 01001 EDU010187D   6829 EDU0101      1987
 2 Autauga, AL 01001 EDU010188D   6900 EDU0101      1988
 3 Autauga, AL 01001 EDU010189D   6920 EDU0101      1989
 4 Autauga, AL 01001 EDU010190D   6847 EDU0101      1990
 5 Autauga, AL 01001 EDU010191D   7008 EDU0101      1991
 6 Autauga, AL 01001 EDU010192D   7137 EDU0101      1992
 7 Autauga, AL 01001 EDU010193D   7152 EDU0101      1993
 8 Autauga, AL 01001 EDU010194D   7381 EDU0101      1994
 9 Autauga, AL 01001 EDU010195D   7568 EDU0101      1995
10 Autauga, AL 01001 EDU010196D   7834 EDU0101      1996
# ℹ 31,440 more rows</code></pre>
</div>
</div>
<p>This looks great! By using the <strong>negative sign</strong>, we can now create a tibble for state data with the county rows REMOVED. This will just leave the non-county (or state) rows and all the columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>EDU01a_state <span class="ot">&lt;-</span> EDU01a_new[<span class="sc">-</span>countystuff, ]</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>EDU01a_state</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 530 × 6
   area_name     STCOU Enrollment   values Measurement  Year
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;
 1 UNITED STATES 00000 EDU010187D 40024299 EDU0101      1987
 2 UNITED STATES 00000 EDU010188D 39967624 EDU0101      1988
 3 UNITED STATES 00000 EDU010189D 40317775 EDU0101      1989
 4 UNITED STATES 00000 EDU010190D 40737600 EDU0101      1990
 5 UNITED STATES 00000 EDU010191D 41385442 EDU0101      1991
 6 UNITED STATES 00000 EDU010192D 42088151 EDU0101      1992
 7 UNITED STATES 00000 EDU010193D 42724710 EDU0101      1993
 8 UNITED STATES 00000 EDU010194D 43369917 EDU0101      1994
 9 UNITED STATES 00000 EDU010195D 43993459 EDU0101      1995
10 UNITED STATES 00000 EDU010196D 44715737 EDU0101      1996
# ℹ 520 more rows</code></pre>
</div>
</div>
<p>Here are the class attributes of our newly made tibble before we are going to change them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(EDU01a_county)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
</div>
<p>Here, we are adding a class attribute called “county” to the already existing attributes. These are printed in the form of a vector.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(EDU01a_county) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"county"</span>, <span class="fu">class</span>(EDU01a_county))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(EDU01a_county)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "county"     "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
</div>
<p>Now, we are creating a new tibble with an additional column for the class type. In the new column, we are calling the first index so ‘county’ will be printed in the new class column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>EDU01a_county_class <span class="ot">&lt;-</span> EDU01a_county <span class="sc">|&gt;</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">class_type =</span> <span class="fu">class</span>(EDU01a_county)[<span class="dv">1</span>])</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>EDU01a_county_class</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 31,450 × 7
   area_name   STCOU Enrollment values Measurement  Year class_type
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;     
 1 Autauga, AL 01001 EDU010187D   6829 EDU0101      1987 county    
 2 Autauga, AL 01001 EDU010188D   6900 EDU0101      1988 county    
 3 Autauga, AL 01001 EDU010189D   6920 EDU0101      1989 county    
 4 Autauga, AL 01001 EDU010190D   6847 EDU0101      1990 county    
 5 Autauga, AL 01001 EDU010191D   7008 EDU0101      1991 county    
 6 Autauga, AL 01001 EDU010192D   7137 EDU0101      1992 county    
 7 Autauga, AL 01001 EDU010193D   7152 EDU0101      1993 county    
 8 Autauga, AL 01001 EDU010194D   7381 EDU0101      1994 county    
 9 Autauga, AL 01001 EDU010195D   7568 EDU0101      1995 county    
10 Autauga, AL 01001 EDU010196D   7834 EDU0101      1996 county    
# ℹ 31,440 more rows</code></pre>
</div>
</div>
<p>We are going to do the same thing for state/non-county data now.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(EDU01a_state) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"state"</span>, <span class="fu">class</span>(EDU01a_state))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Creating the state tibble with the new column for class that reads ‘state’.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>EDU01a_state_class <span class="ot">&lt;-</span> EDU01a_state <span class="sc">|&gt;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">class_type =</span> <span class="fu">class</span>(EDU01a_state)[<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s take a look at the new tibbles. They look great!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(EDU01a_county_class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 31,450 × 7
   area_name   STCOU Enrollment values Measurement  Year class_type
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;     
 1 Autauga, AL 01001 EDU010187D   6829 EDU0101      1987 county    
 2 Autauga, AL 01001 EDU010188D   6900 EDU0101      1988 county    
 3 Autauga, AL 01001 EDU010189D   6920 EDU0101      1989 county    
 4 Autauga, AL 01001 EDU010190D   6847 EDU0101      1990 county    
 5 Autauga, AL 01001 EDU010191D   7008 EDU0101      1991 county    
 6 Autauga, AL 01001 EDU010192D   7137 EDU0101      1992 county    
 7 Autauga, AL 01001 EDU010193D   7152 EDU0101      1993 county    
 8 Autauga, AL 01001 EDU010194D   7381 EDU0101      1994 county    
 9 Autauga, AL 01001 EDU010195D   7568 EDU0101      1995 county    
10 Autauga, AL 01001 EDU010196D   7834 EDU0101      1996 county    
# ℹ 31,440 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(EDU01a_state_class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 530 × 7
   area_name     STCOU Enrollment   values Measurement  Year class_type
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;     
 1 UNITED STATES 00000 EDU010187D 40024299 EDU0101      1987 state     
 2 UNITED STATES 00000 EDU010188D 39967624 EDU0101      1988 state     
 3 UNITED STATES 00000 EDU010189D 40317775 EDU0101      1989 state     
 4 UNITED STATES 00000 EDU010190D 40737600 EDU0101      1990 state     
 5 UNITED STATES 00000 EDU010191D 41385442 EDU0101      1991 state     
 6 UNITED STATES 00000 EDU010192D 42088151 EDU0101      1992 state     
 7 UNITED STATES 00000 EDU010193D 42724710 EDU0101      1993 state     
 8 UNITED STATES 00000 EDU010194D 43369917 EDU0101      1994 state     
 9 UNITED STATES 00000 EDU010195D 43993459 EDU0101      1995 state     
10 UNITED STATES 00000 EDU010196D 44715737 EDU0101      1996 state     
# ℹ 520 more rows</code></pre>
</div>
</div>
<hr>
</section>
<section id="section-4" class="level1">
<h1>#5</h1>
<p>In our County tibble, we want to not only be able to see that the class type is a county, but also see what state the county is in using the state acronym. We are going to use the same substr() function as before to extract the acronym.</p>
<p>The negative one indicates that the ‘start’ index is the second to last digit, and then we are using the total number of positions in ‘area_name’ to indicate the ‘stop’ index. So this would be the last digit. That’s how we are getting the last two digits for the acronym.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#5 Creating a new column for the state abbreviation in the county tibble.</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>EDU01a_county_class_abb <span class="ot">&lt;-</span> EDU01a_county_class <span class="sc">|&gt;</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">abbrev_state =</span> <span class="fu">substr</span>(area_name, <span class="fu">nchar</span>(area_name)<span class="sc">-</span><span class="dv">1</span>, <span class="fu">nchar</span>(area_name)))</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(EDU01a_county_class_abb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 31,450 × 8
   area_name   STCOU Enrollment values Measurement  Year class_type abbrev_state
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;       
 1 Autauga, AL 01001 EDU010187D   6829 EDU0101      1987 county     AL          
 2 Autauga, AL 01001 EDU010188D   6900 EDU0101      1988 county     AL          
 3 Autauga, AL 01001 EDU010189D   6920 EDU0101      1989 county     AL          
 4 Autauga, AL 01001 EDU010190D   6847 EDU0101      1990 county     AL          
 5 Autauga, AL 01001 EDU010191D   7008 EDU0101      1991 county     AL          
 6 Autauga, AL 01001 EDU010192D   7137 EDU0101      1992 county     AL          
 7 Autauga, AL 01001 EDU010193D   7152 EDU0101      1993 county     AL          
 8 Autauga, AL 01001 EDU010194D   7381 EDU0101      1994 county     AL          
 9 Autauga, AL 01001 EDU010195D   7568 EDU0101      1995 county     AL          
10 Autauga, AL 01001 EDU010196D   7834 EDU0101      1996 county     AL          
# ℹ 31,440 more rows</code></pre>
</div>
</div>
<hr>
</section>
<section id="section-5" class="level1">
<h1>#6</h1>
<p>Similarly, we want to display the division for the states. In order to do this, we are first creating a vector of all of the divisions as attributes for the state name data points.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">#6 # creating a vector of the divisions</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>state_division <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"CONNECTICUT"</span> <span class="ot">=</span> <span class="st">"New England"</span>, </span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"MAINE"</span> <span class="ot">=</span> <span class="st">"New England"</span>,</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"MASSACHUSETTS"</span> <span class="ot">=</span> <span class="st">"New England"</span>,</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"NEW HAMPSHIRE"</span> <span class="ot">=</span> <span class="st">"New England"</span>,</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"RHODE ISLAND"</span> <span class="ot">=</span> <span class="st">"New England"</span>,</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"VERMONT"</span> <span class="ot">=</span> <span class="st">"New England"</span>,</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"NEW JERSEY"</span> <span class="ot">=</span> <span class="st">"Middle Atlantic"</span>,</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"NEW YORK"</span> <span class="ot">=</span> <span class="st">"Middle Atlantic"</span>,</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"PENNSYLVANIA"</span> <span class="ot">=</span> <span class="st">"Middle Atlantic"</span>,</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"ILLINOIS"</span> <span class="ot">=</span> <span class="st">"East North Central"</span>,</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"INDIANA"</span> <span class="ot">=</span> <span class="st">"East North Central"</span>,</span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"MICHIGAN"</span> <span class="ot">=</span> <span class="st">"East North Central"</span>,</span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"OHIO"</span> <span class="ot">=</span> <span class="st">"East North Central"</span>,</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"WISCONSIN"</span> <span class="ot">=</span> <span class="st">"East North Central"</span>,</span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"IOWA"</span> <span class="ot">=</span> <span class="st">"West North Central"</span>,</span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"KANSAS"</span> <span class="ot">=</span> <span class="st">"West North Central"</span>,</span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"MINNESOTA"</span> <span class="ot">=</span> <span class="st">"West North Central"</span>,</span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"MISSOURI"</span> <span class="ot">=</span> <span class="st">"West North Central"</span>,</span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"NEBRASKA"</span> <span class="ot">=</span> <span class="st">"West North Central"</span>,</span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"NORTH DAKOTA"</span> <span class="ot">=</span> <span class="st">"West North Central"</span>,</span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"SOUTH DAKOTA"</span> <span class="ot">=</span> <span class="st">"West North Central"</span>,</span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"DELAWARE"</span> <span class="ot">=</span> <span class="st">"South Atlantic"</span>,</span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"FLORIDA"</span> <span class="ot">=</span> <span class="st">"South Atlantic"</span>,</span>
<span id="cb42-26"><a href="#cb42-26" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"GEORGIA"</span> <span class="ot">=</span> <span class="st">"South Atlantic"</span>,</span>
<span id="cb42-27"><a href="#cb42-27" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"MARYLAND"</span> <span class="ot">=</span> <span class="st">"South Atlantic"</span>,</span>
<span id="cb42-28"><a href="#cb42-28" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"NORTH CAROLINA"</span> <span class="ot">=</span> <span class="st">"South Atlantic"</span>,</span>
<span id="cb42-29"><a href="#cb42-29" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"SOUTH CAROLINA"</span> <span class="ot">=</span> <span class="st">"South Atlantic"</span>,</span>
<span id="cb42-30"><a href="#cb42-30" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"VIRGINIA"</span> <span class="ot">=</span> <span class="st">"South Atlantic"</span>,</span>
<span id="cb42-31"><a href="#cb42-31" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"District of Columbia"</span> <span class="ot">=</span> <span class="st">"South Atlantic"</span>,</span>
<span id="cb42-32"><a href="#cb42-32" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"DISTRICT OF COLUMBIA"</span> <span class="ot">=</span> <span class="st">"South Atlantic"</span>,</span>
<span id="cb42-33"><a href="#cb42-33" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"WEST VIRGINIA"</span> <span class="ot">=</span> <span class="st">"South Atlantic"</span>,</span>
<span id="cb42-34"><a href="#cb42-34" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"ALABAMA"</span> <span class="ot">=</span> <span class="st">"East South Central"</span>,</span>
<span id="cb42-35"><a href="#cb42-35" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"KENTUCKY"</span> <span class="ot">=</span> <span class="st">"East South Central"</span>,</span>
<span id="cb42-36"><a href="#cb42-36" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"MISSISSIPPI"</span> <span class="ot">=</span> <span class="st">"East South Central"</span>,</span>
<span id="cb42-37"><a href="#cb42-37" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"TENNESSEE"</span> <span class="ot">=</span> <span class="st">"East South Central"</span>,</span>
<span id="cb42-38"><a href="#cb42-38" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"ARKANSAS"</span> <span class="ot">=</span> <span class="st">"West South Central"</span>,</span>
<span id="cb42-39"><a href="#cb42-39" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"LOUISIANA"</span> <span class="ot">=</span> <span class="st">"West South Central"</span>,</span>
<span id="cb42-40"><a href="#cb42-40" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"OKLAHOMA"</span> <span class="ot">=</span> <span class="st">"West South Central"</span>,</span>
<span id="cb42-41"><a href="#cb42-41" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"TEXAS"</span> <span class="ot">=</span> <span class="st">"West South Central"</span>,</span>
<span id="cb42-42"><a href="#cb42-42" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"ARIZONA"</span> <span class="ot">=</span> <span class="st">"Mountain"</span>,</span>
<span id="cb42-43"><a href="#cb42-43" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"COLORADO"</span> <span class="ot">=</span> <span class="st">"Mountain"</span>,</span>
<span id="cb42-44"><a href="#cb42-44" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"IDAHO"</span> <span class="ot">=</span> <span class="st">"Mountain"</span>,</span>
<span id="cb42-45"><a href="#cb42-45" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"MONTANA"</span> <span class="ot">=</span> <span class="st">"Mountain"</span>,</span>
<span id="cb42-46"><a href="#cb42-46" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"NEVADA"</span> <span class="ot">=</span> <span class="st">"Mountain"</span>,</span>
<span id="cb42-47"><a href="#cb42-47" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"NEW MEXICO"</span> <span class="ot">=</span> <span class="st">"Mountain"</span>,</span>
<span id="cb42-48"><a href="#cb42-48" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"UTAH"</span> <span class="ot">=</span> <span class="st">"Mountain"</span>,</span>
<span id="cb42-49"><a href="#cb42-49" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"WYOMING"</span> <span class="ot">=</span> <span class="st">"Mountain"</span>,</span>
<span id="cb42-50"><a href="#cb42-50" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"ALASKA"</span> <span class="ot">=</span> <span class="st">"Pacific"</span>,</span>
<span id="cb42-51"><a href="#cb42-51" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"CALIFORNIA"</span> <span class="ot">=</span> <span class="st">"Pacific"</span>,</span>
<span id="cb42-52"><a href="#cb42-52" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"HAWAII"</span> <span class="ot">=</span> <span class="st">"Pacific"</span>,</span>
<span id="cb42-53"><a href="#cb42-53" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"OREGON"</span> <span class="ot">=</span> <span class="st">"Pacific"</span>,</span>
<span id="cb42-54"><a href="#cb42-54" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"WASHINGTON"</span> <span class="ot">=</span> <span class="st">"Pacific"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We have created a vector of named character strings called state_division.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(state_division)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Named chr [1:52] "New England" "New England" "New England" "New England" ...
 - attr(*, "names")= chr [1:52] "CONNECTICUT" "MAINE" "MASSACHUSETTS" "NEW HAMPSHIRE" ...</code></pre>
</div>
</div>
<p>Here we are using a vectorized function to create our new tibble with the state division. The mutate() function allows us to create a new column, and the ifelse vectorized function is basically saying, in the vector state_division, if the names of the vector elements matches the area_name variable, it will return what is found in that next position in the function… the area_name value that is in the state_division vector.</p>
<p>Finally, the very last position in the function says what will be returned if there IS NOT a match- “Error”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>EDU01a_state_class_division <span class="ot">&lt;-</span> EDU01a_state_class <span class="sc">|&gt;</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">division =</span> <span class="fu">ifelse</span>(area_name <span class="sc">%in%</span> <span class="fu">names</span>(state_division),</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>                           state_division[area_name],</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Error"</span>))  </span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(EDU01a_state_class_division)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 530 × 8
   area_name     STCOU Enrollment   values Measurement  Year class_type division
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;   
 1 UNITED STATES 00000 EDU010187D 40024299 EDU0101      1987 state      Error   
 2 UNITED STATES 00000 EDU010188D 39967624 EDU0101      1988 state      Error   
 3 UNITED STATES 00000 EDU010189D 40317775 EDU0101      1989 state      Error   
 4 UNITED STATES 00000 EDU010190D 40737600 EDU0101      1990 state      Error   
 5 UNITED STATES 00000 EDU010191D 41385442 EDU0101      1991 state      Error   
 6 UNITED STATES 00000 EDU010192D 42088151 EDU0101      1992 state      Error   
 7 UNITED STATES 00000 EDU010193D 42724710 EDU0101      1993 state      Error   
 8 UNITED STATES 00000 EDU010194D 43369917 EDU0101      1994 state      Error   
 9 UNITED STATES 00000 EDU010195D 43993459 EDU0101      1995 state      Error   
10 UNITED STATES 00000 EDU010196D 44715737 EDU0101      1996 state      Error   
# ℹ 520 more rows</code></pre>
</div>
</div>
<section id="hooray-it-is-showing-the-division-in-our-new-column" class="level3">
<h3 class="anchored" data-anchor-id="hooray-it-is-showing-the-division-in-our-new-column">Hooray! It is showing the Division in our new column!</h3>
</section>
<section id="this-wraps-up-our-pre-processing-steps.-now-we-will-write-functions-that-combine-and-repeat-these-steps-so-we-can-quickly-and-efficiently-make-these-changes-with-a-new-data-set." class="level3">
<h3 class="anchored" data-anchor-id="this-wraps-up-our-pre-processing-steps.-now-we-will-write-functions-that-combine-and-repeat-these-steps-so-we-can-quickly-and-efficiently-make-these-changes-with-a-new-data-set.">This wraps up our pre-processing steps. Now, we will write functions that combine and repeat these steps so we can quickly and efficiently make these changes with a <em>new data set.</em></h3>
<hr>
</section>
<section id="function-for-steps-1-and-2" class="level3">
<h3 class="anchored" data-anchor-id="function-for-steps-1-and-2">Function for steps 1 and 2</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">#function for steps 1 and 2</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(EDU01a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,198 × 42
   Area_name     STCOU EDU010187F EDU010187D EDU010187N1 EDU010187N2 EDU010188F
   &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;            &lt;dbl&gt;
 1 UNITED STATES 00000          0   40024299 0000        0000                 0
 2 ALABAMA       01000          0     733735 0000        0000                 0
 3 Autauga, AL   01001          0       6829 0000        0000                 0
 4 Baldwin, AL   01003          0      16417 0000        0000                 0
 5 Barbour, AL   01005          0       5071 0000        0000                 0
 6 Bibb, AL      01007          0       3557 0000        0000                 0
 7 Blount, AL    01009          0       7319 0000        0000                 0
 8 Bullock, AL   01011          0       2014 0000        0000                 0
 9 Butler, AL    01013          0       4640 0000        0000                 0
10 Calhoun, AL   01015          0      20939 0000        0000                 0
# ℹ 3,188 more rows
# ℹ 35 more variables: EDU010188D &lt;dbl&gt;, EDU010188N1 &lt;chr&gt;, EDU010188N2 &lt;chr&gt;,
#   EDU010189F &lt;dbl&gt;, EDU010189D &lt;dbl&gt;, EDU010189N1 &lt;chr&gt;, EDU010189N2 &lt;chr&gt;,
#   EDU010190F &lt;dbl&gt;, EDU010190D &lt;dbl&gt;, EDU010190N1 &lt;chr&gt;, EDU010190N2 &lt;chr&gt;,
#   EDU010191F &lt;dbl&gt;, EDU010191D &lt;dbl&gt;, EDU010191N1 &lt;chr&gt;, EDU010191N2 &lt;chr&gt;,
#   EDU010192F &lt;dbl&gt;, EDU010192D &lt;dbl&gt;, EDU010192N1 &lt;chr&gt;, EDU010192N2 &lt;chr&gt;,
#   EDU010193F &lt;dbl&gt;, EDU010193D &lt;dbl&gt;, EDU010193N1 &lt;chr&gt;, EDU010193N2 &lt;chr&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>  step_1_2 <span class="ot">&lt;-</span> <span class="cf">function</span>(data, <span class="at">value_col_name =</span> <span class="st">"measurement"</span>) {</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>    data <span class="sc">|&gt;</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(Area_name, <span class="fu">starts_with</span>(<span class="st">"STC"</span>), <span class="fu">ends_with</span>(<span class="st">"D"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rename</span>(<span class="at">area_name =</span> Area_name) <span class="sc">|&gt;</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">ends_with</span>(<span class="st">"D"</span>), <span class="at">names_to =</span> <span class="st">"Enrollment"</span>, <span class="at">values_to =</span> value_col_name)</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>step1result <span class="ot">&lt;-</span> <span class="fu">step_1_2</span>(EDU01a)</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(step1result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 31,980 × 4
   area_name     STCOU Enrollment measurement
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt;
 1 UNITED STATES 00000 EDU010187D    40024299
 2 UNITED STATES 00000 EDU010188D    39967624
 3 UNITED STATES 00000 EDU010189D    40317775
 4 UNITED STATES 00000 EDU010190D    40737600
 5 UNITED STATES 00000 EDU010191D    41385442
 6 UNITED STATES 00000 EDU010192D    42088151
 7 UNITED STATES 00000 EDU010193D    42724710
 8 UNITED STATES 00000 EDU010194D    43369917
 9 UNITED STATES 00000 EDU010195D    43993459
10 UNITED STATES 00000 EDU010196D    44715737
# ℹ 31,970 more rows</code></pre>
</div>
</div>
<hr>
</section>
<section id="function-for-step-3" class="level3">
<h3 class="anchored" data-anchor-id="function-for-step-3">Function for step 3</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>step_3 <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">|&gt;</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">IncompleteYear =</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(Enrollment, <span class="dv">7</span>, <span class="dv">9</span>)),</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>       <span class="co">#Measurement = substr(measurement, 1, 7), </span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">Year =</span> IncompleteYear <span class="sc">+</span> <span class="dv">1800</span>) <span class="sc">|&gt;</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(<span class="sc">-</span>IncompleteYear)</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>step3result <span class="ot">&lt;-</span> <span class="fu">step_3</span>(step1result)</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(step3result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 31,980 × 5
   area_name     STCOU Enrollment measurement  Year
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt;
 1 UNITED STATES 00000 EDU010187D    40024299  1987
 2 UNITED STATES 00000 EDU010188D    39967624  1988
 3 UNITED STATES 00000 EDU010189D    40317775  1989
 4 UNITED STATES 00000 EDU010190D    40737600  1990
 5 UNITED STATES 00000 EDU010191D    41385442  1991
 6 UNITED STATES 00000 EDU010192D    42088151  1992
 7 UNITED STATES 00000 EDU010193D    42724710  1993
 8 UNITED STATES 00000 EDU010194D    43369917  1994
 9 UNITED STATES 00000 EDU010195D    43993459  1995
10 UNITED STATES 00000 EDU010196D    44715737  1996
# ℹ 31,970 more rows</code></pre>
</div>
</div>
<hr>
</section>
<section id="function-for-step-5" class="level3">
<h3 class="anchored" data-anchor-id="function-for-step-5">Function for step 5</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>step_5 <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>    data <span class="sc">|&gt;</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">", </span><span class="sc">\\</span><span class="st">w</span><span class="sc">\\</span><span class="st">w"</span>, area_name), <span class="fu">substr</span>(area_name, <span class="fu">nchar</span>(area_name) <span class="sc">-</span> <span class="dv">1</span>, <span class="fu">nchar</span>(area_name)), <span class="cn">NA</span>))</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>step5result <span class="ot">&lt;-</span> <span class="fu">step_5</span>(step3result)</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(step5result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 31,980 × 6
   area_name     STCOU Enrollment measurement  Year state
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
 1 UNITED STATES 00000 EDU010187D    40024299  1987 &lt;NA&gt; 
 2 UNITED STATES 00000 EDU010188D    39967624  1988 &lt;NA&gt; 
 3 UNITED STATES 00000 EDU010189D    40317775  1989 &lt;NA&gt; 
 4 UNITED STATES 00000 EDU010190D    40737600  1990 &lt;NA&gt; 
 5 UNITED STATES 00000 EDU010191D    41385442  1991 &lt;NA&gt; 
 6 UNITED STATES 00000 EDU010192D    42088151  1992 &lt;NA&gt; 
 7 UNITED STATES 00000 EDU010193D    42724710  1993 &lt;NA&gt; 
 8 UNITED STATES 00000 EDU010194D    43369917  1994 &lt;NA&gt; 
 9 UNITED STATES 00000 EDU010195D    43993459  1995 &lt;NA&gt; 
10 UNITED STATES 00000 EDU010196D    44715737  1996 &lt;NA&gt; 
# ℹ 31,970 more rows</code></pre>
</div>
</div>
<hr>
</section>
<section id="function-for-step-6" class="level3">
<h3 class="anchored" data-anchor-id="function-for-step-6">Function for step 6</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># GABBY COMMENT: could just put 'state' instead of state division (?)</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  step_6 <span class="ot">&lt;-</span> <span class="cf">function</span>(data, <span class="at">div =</span> state_division) {</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>    data <span class="sc">|&gt;</span> </span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">division =</span> <span class="fu">ifelse</span>(area_name <span class="sc">%in%</span> <span class="fu">names</span>(state_division),</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>                        state_division[area_name],</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Error"</span>))  </span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>step6result <span class="ot">&lt;-</span> <span class="fu">step_6</span>(step5result)</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(step6result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 31,980 × 7
   area_name     STCOU Enrollment measurement  Year state division
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   
 1 UNITED STATES 00000 EDU010187D    40024299  1987 &lt;NA&gt;  Error   
 2 UNITED STATES 00000 EDU010188D    39967624  1988 &lt;NA&gt;  Error   
 3 UNITED STATES 00000 EDU010189D    40317775  1989 &lt;NA&gt;  Error   
 4 UNITED STATES 00000 EDU010190D    40737600  1990 &lt;NA&gt;  Error   
 5 UNITED STATES 00000 EDU010191D    41385442  1991 &lt;NA&gt;  Error   
 6 UNITED STATES 00000 EDU010192D    42088151  1992 &lt;NA&gt;  Error   
 7 UNITED STATES 00000 EDU010193D    42724710  1993 &lt;NA&gt;  Error   
 8 UNITED STATES 00000 EDU010194D    43369917  1994 &lt;NA&gt;  Error   
 9 UNITED STATES 00000 EDU010195D    43993459  1995 &lt;NA&gt;  Error   
10 UNITED STATES 00000 EDU010196D    44715737  1996 &lt;NA&gt;  Error   
# ℹ 31,970 more rows</code></pre>
</div>
</div>
<hr>
<section id="another-2-functions-that-take-in-the-output-from-step-3-and-creates-the-two-tibbles-in-step-4-calls-the-above-two-functions-to-perform-steps-5-and-6-and-returns-two-final-tibbles." class="level4">
<h4 class="anchored" data-anchor-id="another-2-functions-that-take-in-the-output-from-step-3-and-creates-the-two-tibbles-in-step-4-calls-the-above-two-functions-to-perform-steps-5-and-6-and-returns-two-final-tibbles.">Another 2 functions that take in the output from step 3 and creates the two tibbles in step 4, calls the above two functions (to perform steps 5 and 6), and returns two final tibbles.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>create_two_datasets <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>    county_filter <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">", </span><span class="sc">\\</span><span class="st">w</span><span class="sc">\\</span><span class="st">w"</span>, data<span class="sc">$</span>area_name)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>    county_data <span class="ot">&lt;-</span> data[county_filter, ]</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>    non_county_data <span class="ot">&lt;-</span> data[<span class="sc">-</span>county_filter, ]</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">class</span>(county_data) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"county"</span>, <span class="fu">class</span>(county_data))</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">class</span>(non_county_data) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"state"</span>, <span class="fu">class</span>(non_county_data))</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">county_data =</span> county_data, <span class="at">non_county_data =</span> non_county_data)</span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">create_two_datasets</span>((step6result)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$county_data
# A tibble: 31,450 × 7
   area_name   STCOU Enrollment measurement  Year state division
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   
 1 Autauga, AL 01001 EDU010187D        6829  1987 AL    Error   
 2 Autauga, AL 01001 EDU010188D        6900  1988 AL    Error   
 3 Autauga, AL 01001 EDU010189D        6920  1989 AL    Error   
 4 Autauga, AL 01001 EDU010190D        6847  1990 AL    Error   
 5 Autauga, AL 01001 EDU010191D        7008  1991 AL    Error   
 6 Autauga, AL 01001 EDU010192D        7137  1992 AL    Error   
 7 Autauga, AL 01001 EDU010193D        7152  1993 AL    Error   
 8 Autauga, AL 01001 EDU010194D        7381  1994 AL    Error   
 9 Autauga, AL 01001 EDU010195D        7568  1995 AL    Error   
10 Autauga, AL 01001 EDU010196D        7834  1996 AL    Error   
# ℹ 31,440 more rows

$non_county_data
# A tibble: 530 × 7
   area_name     STCOU Enrollment measurement  Year state division
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   
 1 UNITED STATES 00000 EDU010187D    40024299  1987 &lt;NA&gt;  Error   
 2 UNITED STATES 00000 EDU010188D    39967624  1988 &lt;NA&gt;  Error   
 3 UNITED STATES 00000 EDU010189D    40317775  1989 &lt;NA&gt;  Error   
 4 UNITED STATES 00000 EDU010190D    40737600  1990 &lt;NA&gt;  Error   
 5 UNITED STATES 00000 EDU010191D    41385442  1991 &lt;NA&gt;  Error   
 6 UNITED STATES 00000 EDU010192D    42088151  1992 &lt;NA&gt;  Error   
 7 UNITED STATES 00000 EDU010193D    42724710  1993 &lt;NA&gt;  Error   
 8 UNITED STATES 00000 EDU010194D    43369917  1994 &lt;NA&gt;  Error   
 9 UNITED STATES 00000 EDU010195D    43993459  1995 &lt;NA&gt;  Error   
10 UNITED STATES 00000 EDU010196D    44715737  1996 &lt;NA&gt;  Error   
# ℹ 520 more rows</code></pre>
</div>
</div>
<p>Now, it’s time to “wrap” all the functions together. Here, we will call out the wrapper function that we created earlier by setting the input parameters as the url of the raw data, along with the column of interest.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># WRAPPER FUNCTION SYNTAX</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>wrapper_function <span class="ot">&lt;-</span> <span class="cf">function</span>(url, <span class="at">value_col_name =</span> <span class="st">"Enrollment"</span>) {</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(url) <span class="sc">|&gt;</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">step_1_2</span>() <span class="sc">|&gt;</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">step_3</span>() <span class="sc">|&gt;</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">step_5</span>() <span class="sc">|&gt;</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">step_6</span>() <span class="sc">|&gt;</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">create_two_datasets</span>()</span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a><span class="fu">wrapper_function</span>(<span class="st">"https://www4.stat.ncsu.edu/~online/datasets/EDU01b.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 3198 Columns: 42
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (22): Area_name, STCOU, EDU010197N1, EDU010197N2, EDU010198N1, EDU010198...
dbl (20): EDU010197F, EDU010197D, EDU010198F, EDU010198D, EDU010199F, EDU010...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>wrapper_result <span class="ot">&lt;-</span> <span class="fu">print</span>(<span class="fu">wrapper_function</span>(<span class="st">"https://www4.stat.ncsu.edu/~online/datasets/EDU01b.csv"</span>, <span class="st">"Enrollment"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 3198 Columns: 42
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (22): Area_name, STCOU, EDU010197N1, EDU010197N2, EDU010198N1, EDU010198...
dbl (20): EDU010197F, EDU010197D, EDU010198F, EDU010198D, EDU010199F, EDU010...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>$county_data
# A tibble: 31,450 × 7
   area_name   STCOU Enrollment measurement  Year state division
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   
 1 Autauga, AL 01001 EDU010197D        8099  1997 AL    Error   
 2 Autauga, AL 01001 EDU010198D        8211  1998 AL    Error   
 3 Autauga, AL 01001 EDU010199D        8489  1999 AL    Error   
 4 Autauga, AL 01001 EDU010200D        8912  2000 AL    Error   
 5 Autauga, AL 01001 EDU010201D        8626  2001 AL    Error   
 6 Autauga, AL 01001 EDU010202D        8762  2002 AL    Error   
 7 Autauga, AL 01001 EDU015203D        9105  2003 AL    Error   
 8 Autauga, AL 01001 EDU015204D        9200  2004 AL    Error   
 9 Autauga, AL 01001 EDU015205D        9559  2005 AL    Error   
10 Autauga, AL 01001 EDU015206D        9652  2006 AL    Error   
# ℹ 31,440 more rows

$non_county_data
# A tibble: 530 × 7
   area_name     STCOU Enrollment measurement  Year state division
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   
 1 UNITED STATES 00000 EDU010197D    44534459  1997 &lt;NA&gt;  Error   
 2 UNITED STATES 00000 EDU010198D    46245814  1998 &lt;NA&gt;  Error   
 3 UNITED STATES 00000 EDU010199D    46368903  1999 &lt;NA&gt;  Error   
 4 UNITED STATES 00000 EDU010200D    46818690  2000 &lt;NA&gt;  Error   
 5 UNITED STATES 00000 EDU010201D    47127066  2001 &lt;NA&gt;  Error   
 6 UNITED STATES 00000 EDU010202D    47606570  2002 &lt;NA&gt;  Error   
 7 UNITED STATES 00000 EDU015203D    48506317  2003 &lt;NA&gt;  Error   
 8 UNITED STATES 00000 EDU015204D    48693287  2004 &lt;NA&gt;  Error   
 9 UNITED STATES 00000 EDU015205D    48978555  2005 &lt;NA&gt;  Error   
10 UNITED STATES 00000 EDU015206D    49140702  2006 &lt;NA&gt;  Error   
# ℹ 520 more rows</code></pre>
</div>
</div>
<p>After utilizing the wrapper function, we need to combine the data together as discussed in the homework assignment by creating an additional function that allows the data to be combined.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co">#We will now combine the data together as discussed in the homework assignment.</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>combine_data <span class="ot">&lt;-</span> <span class="cf">function</span>(result1, result2) {</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  combine_county <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(result1<span class="sc">$</span>county_data, result2<span class="sc">$</span>county_data)</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  combine_non_county <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(result1<span class="sc">$</span>non_county_data, result2<span class="sc">$</span>non_county_data)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">county_data =</span> combine_county, <span class="at">non_county_data =</span> combine_non_county))</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>result1 <span class="ot">&lt;-</span> <span class="fu">wrapper_function</span>(<span class="st">"https://www4.stat.ncsu.edu/~online/datasets/EDU01a.csv"</span>, <span class="st">"Enrollment"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 3198 Columns: 42
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (22): Area_name, STCOU, EDU010187N1, EDU010187N2, EDU010188N1, EDU010188...
dbl (20): EDU010187F, EDU010187D, EDU010188F, EDU010188D, EDU010189F, EDU010...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>result2 <span class="ot">&lt;-</span> <span class="fu">wrapper_function</span>(<span class="st">"https://www4.stat.ncsu.edu/~online/datasets/EDU01b.csv"</span>, <span class="st">"Enrollment"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 3198 Columns: 42
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (22): Area_name, STCOU, EDU010197N1, EDU010197N2, EDU010198N1, EDU010198...
dbl (20): EDU010197F, EDU010197D, EDU010198F, EDU010198D, EDU010199F, EDU010...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>combine_result <span class="ot">&lt;-</span> <span class="fu">combine_data</span>(result1, result2)</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(combine_result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$county_data
# A tibble: 62,900 × 7
   area_name   STCOU Enrollment measurement  Year state division
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   
 1 Autauga, AL 01001 EDU010187D        6829  1987 AL    Error   
 2 Autauga, AL 01001 EDU010188D        6900  1988 AL    Error   
 3 Autauga, AL 01001 EDU010189D        6920  1989 AL    Error   
 4 Autauga, AL 01001 EDU010190D        6847  1990 AL    Error   
 5 Autauga, AL 01001 EDU010191D        7008  1991 AL    Error   
 6 Autauga, AL 01001 EDU010192D        7137  1992 AL    Error   
 7 Autauga, AL 01001 EDU010193D        7152  1993 AL    Error   
 8 Autauga, AL 01001 EDU010194D        7381  1994 AL    Error   
 9 Autauga, AL 01001 EDU010195D        7568  1995 AL    Error   
10 Autauga, AL 01001 EDU010196D        7834  1996 AL    Error   
# ℹ 62,890 more rows

$non_county_data
# A tibble: 1,060 × 7
   area_name     STCOU Enrollment measurement  Year state division
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   
 1 UNITED STATES 00000 EDU010187D    40024299  1987 &lt;NA&gt;  Error   
 2 UNITED STATES 00000 EDU010188D    39967624  1988 &lt;NA&gt;  Error   
 3 UNITED STATES 00000 EDU010189D    40317775  1989 &lt;NA&gt;  Error   
 4 UNITED STATES 00000 EDU010190D    40737600  1990 &lt;NA&gt;  Error   
 5 UNITED STATES 00000 EDU010191D    41385442  1991 &lt;NA&gt;  Error   
 6 UNITED STATES 00000 EDU010192D    42088151  1992 &lt;NA&gt;  Error   
 7 UNITED STATES 00000 EDU010193D    42724710  1993 &lt;NA&gt;  Error   
 8 UNITED STATES 00000 EDU010194D    43369917  1994 &lt;NA&gt;  Error   
 9 UNITED STATES 00000 EDU010195D    43993459  1995 &lt;NA&gt;  Error   
10 UNITED STATES 00000 EDU010196D    44715737  1996 &lt;NA&gt;  Error   
# ℹ 1,050 more rows</code></pre>
</div>
</div>
<p>Now it’s time to create some plot functions, yay! The first plot function we decided to create is the county function. The inputs for that function are the dataset, the state in question, the column of data that we’re looking at, whether we’re looking at the top of the county or the bottom of the county, and lastly the number of “top” or “bottom” that will be investigated.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>plot_county <span class="ot">&lt;-</span> <span class="cf">function</span>(data, <span class="at">state2 =</span> <span class="st">"NC"</span>, <span class="at">var_name =</span> <span class="st">"measurement"</span>, <span class="at">top_bottom_county =</span> <span class="st">"top"</span>, <span class="at">num_of_county =</span> <span class="dv">5</span>) {</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>  data_state <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(state <span class="sc">==</span> state2)</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(top_bottom_county <span class="sc">==</span> <span class="st">"top"</span>) {</span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>       mean_values <span class="ot">&lt;-</span> data_state <span class="sc">|&gt;</span> </span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">group_by</span>(area_name) <span class="sc">|&gt;</span></span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">summarize</span>(<span class="at">mean_value =</span> <span class="fu">mean</span>(<span class="fu">get</span>(var_name), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_value)) </span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a>      <span class="cf">else</span> <span class="cf">if</span> (top_bottom_county <span class="sc">==</span> <span class="st">"bottom"</span>) {</span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a>        mean_values <span class="ot">&lt;-</span> data_state <span class="sc">|&gt;</span> </span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a>          <span class="fu">group_by</span>(area_name) <span class="sc">|&gt;</span></span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a>          <span class="fu">summarize</span>(<span class="at">mean_value =</span> <span class="fu">mean</span>(<span class="fu">get</span>(var_name), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb70-18"><a href="#cb70-18" aria-hidden="true" tabindex="-1"></a>          <span class="fu">arrange</span>(mean_value)</span>
<span id="cb70-19"><a href="#cb70-19" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb70-20"><a href="#cb70-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-21"><a href="#cb70-21" aria-hidden="true" tabindex="-1"></a>    areas_select <span class="ot">&lt;-</span> mean_values<span class="sc">$</span>area_name[<span class="dv">1</span><span class="sc">:</span>num_of_county]</span>
<span id="cb70-22"><a href="#cb70-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-23"><a href="#cb70-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb70-24"><a href="#cb70-24" aria-hidden="true" tabindex="-1"></a>    plot_data <span class="ot">&lt;-</span> data_state <span class="sc">|&gt;</span></span>
<span id="cb70-25"><a href="#cb70-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(area_name <span class="sc">%in%</span> areas_select)</span>
<span id="cb70-26"><a href="#cb70-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb70-27"><a href="#cb70-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb70-28"><a href="#cb70-28" aria-hidden="true" tabindex="-1"></a>    plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(plot_data, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> <span class="fu">get</span>(var_name), <span class="at">color =</span> area_name)) <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Mean Value"</span>, <span class="at">title =</span> <span class="st">"Line Plot"</span>)</span>
<span id="cb70-29"><a href="#cb70-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb70-30"><a href="#cb70-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(plot)  </span>
<span id="cb70-31"><a href="#cb70-31" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb70-32"><a href="#cb70-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb70-33"><a href="#cb70-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-34"><a href="#cb70-34" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_county</span>(wrapper_result<span class="sc">$</span>county_data,<span class="at">state =</span> <span class="st">"NC"</span>, <span class="at">var_name =</span> <span class="st">"measurement"</span>, <span class="at">top_bottom_county =</span> <span class="st">"top"</span>, <span class="at">num_of_county =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Project1_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(wrapper_result<span class="sc">$</span>county_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 31,450 × 7
   area_name   STCOU Enrollment measurement  Year state division
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   
 1 Autauga, AL 01001 EDU010197D        8099  1997 AL    Error   
 2 Autauga, AL 01001 EDU010198D        8211  1998 AL    Error   
 3 Autauga, AL 01001 EDU010199D        8489  1999 AL    Error   
 4 Autauga, AL 01001 EDU010200D        8912  2000 AL    Error   
 5 Autauga, AL 01001 EDU010201D        8626  2001 AL    Error   
 6 Autauga, AL 01001 EDU010202D        8762  2002 AL    Error   
 7 Autauga, AL 01001 EDU015203D        9105  2003 AL    Error   
 8 Autauga, AL 01001 EDU015204D        9200  2004 AL    Error   
 9 Autauga, AL 01001 EDU015205D        9559  2005 AL    Error   
10 Autauga, AL 01001 EDU015206D        9652  2006 AL    Error   
# ℹ 31,440 more rows</code></pre>
</div>
</div>
<p>The next plot function that we have to create is for the state dataset. Here, the inputs for the function would be the data, and the variable that we want to analyze.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create function for plotting state</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(wrapper_result<span class="sc">$</span>non_county_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 530 × 7
   area_name     STCOU Enrollment measurement  Year state division
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   
 1 UNITED STATES 00000 EDU010197D    44534459  1997 &lt;NA&gt;  Error   
 2 UNITED STATES 00000 EDU010198D    46245814  1998 &lt;NA&gt;  Error   
 3 UNITED STATES 00000 EDU010199D    46368903  1999 &lt;NA&gt;  Error   
 4 UNITED STATES 00000 EDU010200D    46818690  2000 &lt;NA&gt;  Error   
 5 UNITED STATES 00000 EDU010201D    47127066  2001 &lt;NA&gt;  Error   
 6 UNITED STATES 00000 EDU010202D    47606570  2002 &lt;NA&gt;  Error   
 7 UNITED STATES 00000 EDU015203D    48506317  2003 &lt;NA&gt;  Error   
 8 UNITED STATES 00000 EDU015204D    48693287  2004 &lt;NA&gt;  Error   
 9 UNITED STATES 00000 EDU015205D    48978555  2005 &lt;NA&gt;  Error   
10 UNITED STATES 00000 EDU015206D    49140702  2006 &lt;NA&gt;  Error   
# ℹ 520 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>plot_state <span class="ot">&lt;-</span> <span class="cf">function</span>(data, <span class="at">var_name =</span> <span class="st">"measurement"</span>) {</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>    filter_data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(division <span class="sc">!=</span> <span class="st">"Error"</span>)</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>    data_summary <span class="ot">&lt;-</span> filter_data <span class="sc">|&gt;</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(division, Year) <span class="sc">|&gt;</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">mean_value =</span> <span class="fu">mean</span>(<span class="fu">get</span>(var_name)), <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">|&gt;</span></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(mean_value)</span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a>    plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data_summary, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> mean_value, <span class="at">color =</span> division)) <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Mean Value"</span>, <span class="at">title =</span> <span class="st">"Line Plot"</span>)</span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(plot)</span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb75-15"><a href="#cb75-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb75-16"><a href="#cb75-16" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_state</span>(wrapper_result<span class="sc">$</span>non_county_data, <span class="at">var_name =</span> <span class="st">"measurement"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Project1_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(wrapper_result<span class="sc">$</span>non_county_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 530 × 7
   area_name     STCOU Enrollment measurement  Year state division
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   
 1 UNITED STATES 00000 EDU010197D    44534459  1997 &lt;NA&gt;  Error   
 2 UNITED STATES 00000 EDU010198D    46245814  1998 &lt;NA&gt;  Error   
 3 UNITED STATES 00000 EDU010199D    46368903  1999 &lt;NA&gt;  Error   
 4 UNITED STATES 00000 EDU010200D    46818690  2000 &lt;NA&gt;  Error   
 5 UNITED STATES 00000 EDU010201D    47127066  2001 &lt;NA&gt;  Error   
 6 UNITED STATES 00000 EDU010202D    47606570  2002 &lt;NA&gt;  Error   
 7 UNITED STATES 00000 EDU015203D    48506317  2003 &lt;NA&gt;  Error   
 8 UNITED STATES 00000 EDU015204D    48693287  2004 &lt;NA&gt;  Error   
 9 UNITED STATES 00000 EDU015205D    48978555  2005 &lt;NA&gt;  Error   
10 UNITED STATES 00000 EDU015206D    49140702  2006 &lt;NA&gt;  Error   
# ℹ 520 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(wrapper_result<span class="sc">$</span>non_county_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>state [530 × 7] (S3: state/tbl_df/tbl/data.frame)
 $ area_name  : chr [1:530] "UNITED STATES" "UNITED STATES" "UNITED STATES" "UNITED STATES" ...
 $ STCOU      : chr [1:530] "00000" "00000" "00000" "00000" ...
 $ Enrollment : chr [1:530] "EDU010197D" "EDU010198D" "EDU010199D" "EDU010200D" ...
 $ measurement: num [1:530] 44534459 46245814 46368903 46818690 47127066 ...
 $ Year       : num [1:530] 1997 1998 1999 2000 2001 ...
 $ state      : chr [1:530] NA NA NA NA ...
 $ division   : chr [1:530] "Error" "Error" "Error" "Error" ...</code></pre>
</div>
</div>
<p>And now… for the grand finale. The End of the Report!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Run our data processing function on two enrollment</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>wrapper_edu01a <span class="ot">&lt;-</span> <span class="fu">wrapper_function</span>(<span class="st">"https://www4.stat.ncsu.edu/~online/datasets/EDU01a.csv"</span>, <span class="st">"Enrollment"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 3198 Columns: 42
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (22): Area_name, STCOU, EDU010187N1, EDU010187N2, EDU010188N1, EDU010188...
dbl (20): EDU010187F, EDU010187D, EDU010188F, EDU010188D, EDU010189F, EDU010...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>wrapper_edu01b <span class="ot">&lt;-</span> <span class="fu">wrapper_function</span>(<span class="st">"https://www4.stat.ncsu.edu/~online/datasets/EDU01b.csv"</span>, <span class="st">"Enrollment"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 3198 Columns: 42
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (22): Area_name, STCOU, EDU010197N1, EDU010197N2, EDU010198N1, EDU010198...
dbl (20): EDU010197F, EDU010197D, EDU010198F, EDU010198D, EDU010199F, EDU010...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run our data combining function to put these into one object</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>edu_combined <span class="ot">&lt;-</span> <span class="fu">combine_data</span>(wrapper_edu01a, wrapper_edu01b)</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Use the plot function on the state data frame</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_state</span>(edu_combined<span class="sc">$</span>non_county_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Project1_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Use the plot function on the county data frame</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_county</span>(edu_combined<span class="sc">$</span>county_data, <span class="at">state =</span> <span class="st">"NC"</span>, <span class="at">var_name =</span> <span class="st">"measurement"</span>, <span class="at">top_bottom_county =</span> <span class="st">"top"</span>, <span class="at">num_of_county =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Project1_files/figure-html/unnamed-chunk-31-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_county</span>(edu_combined<span class="sc">$</span>county_data, <span class="at">state =</span> <span class="st">"SC"</span>, <span class="at">var_name =</span> <span class="st">"measurement"</span>, <span class="at">top_bottom_county =</span> <span class="st">"bottom"</span>, <span class="at">num_of_county =</span> <span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Project1_files/figure-html/unnamed-chunk-31-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_county</span>(edu_combined<span class="sc">$</span>county_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Project1_files/figure-html/unnamed-chunk-31-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_county</span>(edu_combined<span class="sc">$</span>county_data, <span class="at">state =</span> <span class="st">"PA"</span>, <span class="at">var_name =</span> <span class="st">"measurement"</span>, <span class="at">top_bottom_county =</span> <span class="st">"top"</span>, <span class="at">num_of_county =</span> <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Project1_files/figure-html/unnamed-chunk-31-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Run our data processing function on 4 different sets of data</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>wrapper_pst01a <span class="ot">&lt;-</span> <span class="fu">wrapper_function</span>(<span class="st">"https://www4.stat.ncsu.edu/~online/datasets/PST01a.csv"</span>, <span class="st">"Enrollment"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 3198 Columns: 42
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (22): Area_name, STCOU, PST015171N1, PST015171N2, PST015172N1, PST015172...
dbl (20): PST015171F, PST015171D, PST015172F, PST015172D, PST015173F, PST015...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>wrapper_pst01b <span class="ot">&lt;-</span> <span class="fu">wrapper_function</span>(<span class="st">"https://www4.stat.ncsu.edu/~online/datasets/PST01b.csv"</span>, <span class="st">"Enrollment"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 3198 Columns: 42
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (22): Area_name, STCOU, PST025182N1, PST025182N2, PST025183N1, PST025183...
dbl (20): PST025182F, PST025182D, PST025183F, PST025183D, PST025184F, PST025...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>wrapper_pst01c <span class="ot">&lt;-</span> <span class="fu">wrapper_function</span>(<span class="st">"https://www4.stat.ncsu.edu/~online/datasets/PST01c.csv"</span>, <span class="st">"Enrollment"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 3198 Columns: 42
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (22): Area_name, STCOU, PST035191N1, PST035191N2, PST035192N1, PST035192...
dbl (20): PST035191F, PST035191D, PST035192F, PST035192D, PST035193F, PST035...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>wrapper_pst01d <span class="ot">&lt;-</span> <span class="fu">wrapper_function</span>(<span class="st">"https://www4.stat.ncsu.edu/~online/datasets/PST01d.csv"</span>, <span class="st">"Enrollment"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 3198 Columns: 42
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (22): Area_name, STCOU, PST045200N1, PST045200N2, PST045201N1, PST045201...
dbl (20): PST045200F, PST045200D, PST045201F, PST045201D, PST045202F, PST045...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Run data combining function three times maybe? </span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>pst01ab_combined <span class="ot">&lt;-</span> <span class="fu">combine_data</span>(wrapper_pst01a, wrapper_pst01b)</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>pst01cd_combined <span class="ot">&lt;-</span> <span class="fu">combine_data</span>(wrapper_pst01c, wrapper_pst01d)</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>pst01_combined <span class="ot">&lt;-</span> <span class="fu">combine_data</span>(pst01ab_combined, pst01cd_combined)</span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(pst01_combined)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$county_data
# A tibble: 125,800 × 7
   area_name   STCOU Enrollment measurement  Year state division
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   
 1 Autauga, AL 01001 PST015171D       25508  1971 AL    Error   
 2 Autauga, AL 01001 PST015172D       27166  1972 AL    Error   
 3 Autauga, AL 01001 PST015173D       28463  1973 AL    Error   
 4 Autauga, AL 01001 PST015174D       29266  1974 AL    Error   
 5 Autauga, AL 01001 PST015175D       29718  1975 AL    Error   
 6 Autauga, AL 01001 PST015176D       29896  1976 AL    Error   
 7 Autauga, AL 01001 PST015177D       30462  1977 AL    Error   
 8 Autauga, AL 01001 PST015178D       30882  1978 AL    Error   
 9 Autauga, AL 01001 PST015179D       32055  1979 AL    Error   
10 Autauga, AL 01001 PST025181D       31985  1981 AL    Error   
# ℹ 125,790 more rows

$non_county_data
# A tibble: 2,120 × 7
   area_name     STCOU Enrollment measurement  Year state division
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   
 1 UNITED STATES 00000 PST015171D   206827028  1971 &lt;NA&gt;  Error   
 2 UNITED STATES 00000 PST015172D   209283904  1972 &lt;NA&gt;  Error   
 3 UNITED STATES 00000 PST015173D   211357490  1973 &lt;NA&gt;  Error   
 4 UNITED STATES 00000 PST015174D   213341552  1974 &lt;NA&gt;  Error   
 5 UNITED STATES 00000 PST015175D   215465246  1975 &lt;NA&gt;  Error   
 6 UNITED STATES 00000 PST015176D   217562728  1976 &lt;NA&gt;  Error   
 7 UNITED STATES 00000 PST015177D   219759860  1977 &lt;NA&gt;  Error   
 8 UNITED STATES 00000 PST015178D   222095080  1978 &lt;NA&gt;  Error   
 9 UNITED STATES 00000 PST015179D   224567234  1979 &lt;NA&gt;  Error   
10 UNITED STATES 00000 PST025181D   229466391  1981 &lt;NA&gt;  Error   
# ℹ 2,110 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Use plot function on state data frame.</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_state</span>(pst01_combined<span class="sc">$</span>non_county_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Project1_files/figure-html/unnamed-chunk-31-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Use plot function on county data frame.</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_county</span>(pst01_combined<span class="sc">$</span>county_data, <span class="at">state =</span> <span class="st">"CA"</span>, <span class="at">var_name =</span> <span class="st">"measurement"</span>, <span class="at">top_bottom_county =</span> <span class="st">"top"</span>, <span class="at">num_of_county =</span> <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Project1_files/figure-html/unnamed-chunk-31-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_county</span>(pst01_combined<span class="sc">$</span>county_data, <span class="at">state =</span> <span class="st">"TX"</span>, <span class="at">var_name =</span> <span class="st">"measurement"</span>, <span class="at">top_bottom_county =</span> <span class="st">"top"</span>, <span class="at">num_of_county =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Project1_files/figure-html/unnamed-chunk-31-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_county</span>(pst01_combined<span class="sc">$</span>county_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Project1_files/figure-html/unnamed-chunk-31-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_county</span>(pst01_combined<span class="sc">$</span>county_data, <span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">var_name =</span> <span class="st">"measurement"</span>, <span class="at">top_bottom_county =</span> <span class="st">"top"</span>, <span class="at">num_of_county =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Project1_files/figure-html/unnamed-chunk-31-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The report should be all done and good to go!</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>